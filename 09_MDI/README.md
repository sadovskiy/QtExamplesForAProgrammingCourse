# 09 Пример реализации многодокументного интерфейса (MDI) в Qt

Демонстрация работы приложения с GUI состоящего из объектов, расположенных на форме `MainWindow`:
- от класса `QMdiArea`
- от класса `QMenuBar`
- от класса `QToolBar`

В данном приложении показано как можно организовать интерфейс пользователя удобный для работы с несколькими разными документами (файлами) одновременно в одном окне (англ. multiple document interface, MDI). На форме `MainWindow` размещено главное меню приложения `menuBar`, панель `mainToolBar` с действиями типа `QAction` дублирующими пункты меню и область для размещения документов `mdiArea`. В этой MDI-области по нажатию кнопок "New" и "Open" создаются окна, соответствующие отдельным документам. Основными метода работы с этими окнами являются: `createMdiChild()`, `activeMdiChild()` и `findMdiChild(const QString &fileName)`.
1. `createMdiChild()` - создаёт MDI-документ в динамической памяти. В качестве основы используется класс `MdiChild`, являющийся наследником от класса простого текстового редактора `QTextEdit`. Класс `MdiChild` немного расширяет его возможности для нашей задачи. Например, даёт возможность читать и записывать текстовые файлы. Хранить имя и путь к файлам. Реагировать на изменение и закрытие текстовых файлов. Его возможности описывают в файлах `mdichild.h` и `mdichild.cpp`.
2. `activeMdiChild()` - выдаёт указатель на текущее активное окно документа. Для этого делает приведение типа (класса) из `QMdiSubWindow` к `MdiChild`.
3. `findMdiChild(const QString &fileName)` - проходит по списку открытых документов в поисках документа, который соответствует файлу `fileName`. Поиск идёт по имени файла. Можно использовать, например при открытии нового документа, для проверки не открыт ли он уже.

Так как объекты от класса `QTextEdit` уже имеют контекстное меню, для его использования можно просто вызвать через метод `activeMdiChild()` нужное действие, например `cut()`. То есть основное окно просто переадресовывает действия `QAction` меню в дочерние окна.
