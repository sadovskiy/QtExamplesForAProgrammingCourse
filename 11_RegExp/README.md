# 11 Пример работы с регулярными выражениям и подсветкой текста в Qt

Демонстрация работы приложения с GUI состоящего из объектов, расположенных на форме `MainWindow`:
- от класса `QTabWidget`
- от класса `QPushButton`
- от класса `QLineEdit`
- от класса `QPlainTextEdit`

В данном приложении показано как работать с вкладками, регулярными выражениями (англ. regular expressions, regExp) и подсветкой текста. На главном окне формы расположено две вкладки, первая демонстрирует работу с валидатором, а вторая с поиском определённых значений в тексте. Валидатор (от англ. validator) — это объект, который проверяет на корректность синтаксиса какой-либо входной текст. С помощью регулярных выражений можно создавать валидатор любой сложности.
1. Пример с валидатором на первой вкладке. В поле **Pattern** вводится маска для проверки на соответствие поля **Edit Text**. По умолчанию проверка отключена и в поле **Edit Text** можно вводить любой текст, но если нажать по кнопке **Apply Pattern**, то в это поле можно будет ввести только текст, соответствующий регулярному выражению поля **Pattern**. В примере, по умолчанию находится выражение (шаблон) описывающие телефонный номер формата "(123)456-78-90". Этот шаблон можно редактировать согласно правилам регулярных выражений. Подробно они описаны в [Википедии](https://ru.wikipedia.org/wiki/Регулярные_выражения). Вводимое значение будет считаться не правильным пока не будет введено полностью, о чём будет говорить надпись внизу, под полем ввода.
2. Пример с поиском текста по шаблону на второй вкладке. Тут в тексте представлен список строк с похожими на IP-адреса содержимом, а в нижнем поле рядом с кнопкой **Find** находится поле содержащие шаблон, соответствующий IP-адресу. По нажатию на кнопку **Find**, произойдёт поиск и подсветка в тексте только тех значений, которые соответствуют правильным IP-адресам. Нижнее поле рядом с кнопкой **Replace** предназначено для замены найденного текста на текст, введённый в этом поле. Замена будет произведена соответственно после нажатия на эту кнопку. Следует отметить, что по умолчанию в шаблоне выставлены очень жёсткие ограничения, по этом замена не сработает. Например, для замены первой строчки, надо убрать в шаблоне символ **$** и затем нажать на кнопку **Replace**. Для отмены замены надо нажать сочетание клавиш **Ctrl+Z**. Если какую-то часть текста надо сохранить из исходного выражения, то её надо взять в круглые скобки, а в поле, где вводится новая строка, в то место куда надо вставить фрагмент исходной строки надо вставить символ **\** и число, означающие порядковый номер аргумента. В примере таких аргументов три: `((25[0-5]|2[0-4][0-9]|[01]{0,1}[0-9][0-9]{0,1})\.)`, `(25[0-5]|2[0-4][0-9]|[01]{0,1}[0-9][0-9]{0,1})` и `(25[0-5]|2[0-4][0-9]|[01]{0,1}[0-9][0-9]{0,1})`, а значит и в строке замены можно использовать только три `\1 \2 \3` значения.

Пример на первой вкладке работает за счёт создания объекта `QRegularExpressionValidator`, которому надо сказать откуда следует брать шаблон (в примере из ui->lineEditValidate). Следует отметить, что у объектов типа `QLineEdit`, есть метод `setValidator()` предназначенный для указания какого-нибудь валидатора, куда как раз и помещается объект типа `new QRegularExpressionValidator`. Далее происходит проверка соответствия шаблону.

Пример на второй вкладки работает за счёт унаследованного класса `TextSyntaxHighlighter` от класса `QSyntaxHighlighter`. Передаём объекту `highlighter` объект `ui->plainTextEdit` содержащий исходный текст. Ему же задаём через метод `setPattern()` шаблон поиска и он сможет искать нужный фрагмент и подсветит его.
