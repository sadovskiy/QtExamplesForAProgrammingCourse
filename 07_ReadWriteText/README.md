# 07 Пример чтения и записи текстового файла, работы с ресурсами и меню приложения в Qt

Демонстрация работы приложения с GUI состоящего из объектов, расположенных на форме `MainWindow`:
- от класса `QGroupBox`
- от класса `QRadioButton`
- от класса `QMenuBar`
- от класса `QToolBar`
- от класса `QLabel`
- от класса `QTextBox`
- от класса `QListWidget`
- от класса `QSplitter`

## Чтение и запись файла
В данном приложении показано как можно организовать чтения и записи файлов. Перед открытием на чтение надо с помощью переключателя `QRadioButton` выбрать в какое окно загрузить файл. Далее для чтения текстового файла надо указать его через пункт **"Open"** меню **"File"**. В диалоговом окне открытия файла можно выбрать любой текстовой файл. Разница между двумя вариантами чтения **"textEdit"** и **"listWidget"** заключается в использовании метода `readAll()` с объектом `textEdit` и использовании метода `readLine()` с объектом `listWidget`.
1. Метод `readAll()` читает сразу весь поток данных из файла. В случае больших файлов рекомендуется избегать данный вариант.
2. Метод `readLine()` читает построчно и для этого его надо помещать в цикл. Когда чтение дойдёт до конца файл, то метод `atEnd()` вернёт `true`.

В общем случае технология чтения файла выглядит так:
1. С помощью диалогового окна `QFileDialog` получаем адрес и имя файла в виде строки `QString`.
2. Используя класс `QFile` создаём объект `file` через который будем взаимодействовать с файлом.
3. Делаем попытку подключится к файлу на чтение и затем проверяем удачность этой операции.
4. Передаём объект `file` подключённый к файлу и открываем текстовой поток `in`.
5. Используя методы `readAll()` или `readLine()` текстового потока `in` читаем файл.

Запись файла выглядит аналогично, за исключением последнего пункта. В случае записи необходимо воспользоваться перегруженной операцией поместить в поток `<<`, например так `out << ui->textEdit->toPlainText()`. Это позволит сбросить всё содержимое объекта в файл. Для записи построчно используется эта же операция, но помещённая в цикл.

## Работа с ресурсами
В данном примере представлен случай, когда необходимо добавить некие ресурсы, например иконки для кнопок. Для этого создаётся файл `*.qrc`, в который добавляются файлы с изображениями через редактор **Qt Creator**. Рекомендуется сами файлы разместить в подкаталоге проекта, например `images`. Файл `*.qrc` представляет из себя простой XML, где прописываются пути к файлам с изображениями. Далее в свойствах нужного пункта меню `QAction` ищется свойство **icon**. В этом свойстве есть выпадающее меню, с пунктом **"Выбрать ресурс..."**. В открывшемся окне можно выбрать и затем добавить необходимое изображение. Для добавления в исходном коде изображения можно использовать метод `setIcon(QIcon(":/images/ico.png"));`, где надо через двоеточие и префикс вписать название нужного изображения.

## Меню mainToolBar
Для добавления меню с кнопками надо в дизайнере нажать правой кнопкой мыши по пустой области формы `MainWindow` и появившемся меню выбрать пункт **Добавить панель инструментов**. Для размещения кнопок на этой панели надо просто перетащить мышью (зажав Ctrl для копирования) из существующего меню нужные пункты `QAction`. Предварительно у этих пунктов должны быть иконки.

## Разделитель между объектами
В случае использования нескольких объектов можно использовать специальный объект класса `QSplitter` для отделения одного объекта от другого, с возможностью пользователю менять размеры. Это делает за счёт объекта разделителя `splitter`, размещённого на форме `MainWindow`. При наведении мыши на этот разделитель, указатель принимает форму стрелки и в этот момент его можно перетянуть в правую или левую сторону изменив размеры объектов `textEdit` и `listWidget`.
